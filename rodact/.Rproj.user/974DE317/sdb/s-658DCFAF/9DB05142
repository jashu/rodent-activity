{
    "contents" : "#'  labelZones\n#'  \n#'  Labels every time sample in subject's file to indicate whether the subject is in the light or\n#'  dark zone, or in the doorway between the two.\n#'  \n#'  @param subject Subject ID corresponding to file with activity time series.\n#'  @param session Session number corresponding to folder where file is located.\n#'  @param type Options are \"LD\" (default) for light-dark, \"L\" for all light, or \"D\" for all dark.\n#'  @param file_path Optional specification of file path where session folders are located.\n#'  Defaults to current working directory.\n#'  @param file_ext Optional specification of file extension if something other than \"txt\".\n#'  @param inferZones Should the function infer the location of the dark box? Defaults to TRUE.\n#'                    If set to FALSE, must specify darkZone parameter.\n#'  @param darkZone If the position of the dark box is known, specify any Y coordinate that falls\n#'         within its space. Not used if inferZones is set to TRUE.\n#'  @return overwrites exisiting files, adding a zone label to each line. See details.\n#'  @author Jason Shumake\n#'  @details\n#'  WARNING 1: this function will overwrite the original files that are being passed to it. If you\n#'  want to maintain an ulnaltered copy of the original files, back them up elsewhere before using\n#'  this function.\n#'  \n#'  WARNING 2: make sure you have first run \"fixData\" or have otherwise interpolated missing X,Y\n#'  coordinates. Otherwise you will get false labeling of zones for time points where rat is\n#'  \"off grid\", i.e., not breaking any infrared beams, which can happen when the rat rears upright\n#'  into a corner. \n#'  \n#'  Labels every time sample in subject's file to indicate whether the subject is in the light or\n#'  dark zone, or in the doorway between the two. Recommended that for future experiments you \n#'  make note of the Y coordinates where you place the dark box. If you are unsure of the coordinates\n#'  of the dark box, the default behavior is that the location of the dark box will be inferred\n#'  from the maximum likelihood of the rat's location over the test session. This is almost\n#'  invariably an accurate inference except in cases where the rat has received an experimental\n#'  manipulation that causes a drastic reduction in fear/anxiety. At most, rats may equalize their\n#'  exploration of both light and dark chambers. A marked preference for the light zone is exceedingly\n#'  rare.\n#'  \n#'  If \"L\" is passed to the <type> parameter, all time samples are labeled as \"light\".\n#'  If \"D\" is passed to the <type> parameter, all time samples are labeled as \"dark\".\n#'  \n#'  @export\n\nlabelZones = function(subject, session, type = \"LD\", file_path = getwd(), file_ext = \"txt\",\n                      inferZones = TRUE, darkZone = 9)\n{\n  if (!type %in% c(\"LD\",\"L\",\"D\")) stop(\"Invalid argument for type parameter.\")\n  file = paste(file_path, \"/Session\", session, \"/\", subject, \".\", file_ext, sep=\"\")\n  data = read.table(file,header=T)\n  if (typeof(data$Time)==\"integer\") stop(\"Data is unprocessed. First run 'fixData'.\")\n  data$Zone = \"light\"\n  #if you are not sure which side of box you placed the dark zone, it can be inferred from\n  #the animal's mean Y position. virtually all rats spend more time in the dark zone than in\n  #the light zone.\n  if (inferZones) darkZone = mean(data$Y)\n  \n  if (type == \"LD\")\n  {\n    if (darkZone<9)\n    {\n      for (i in 1:nrow(data))\n      {\n        if (data$X[i] >= 6.5 & data$X[i] <= 10.5 & data$Y[i] >= 6 & data$Y[i] < 9)\n          data$Zone[i]=\"doorway\"\n        else if (data$Y[i] < 9)\n          data$Zone[i]=\"dark\"\n      }\n    }\n    if (darkZone>9)\n    {\n      for (i in 1:nrow(data))\n      {\n        if (data$X[i] >= 6.5 & data$X[i] <= 10.5 & data$Y[i] > 6 & data$Y[i] <= 9)\n          data$Zone[i]=\"doorway\"\n        else if (data$Y[i] > 9)\n          data$Zone[i]=\"dark\"\n      }\n    }\n  }\n  if (type == \"D\") data$Zone = \"dark\"\n  write.table(data,file=file,sep=\"\\t\",row.names=FALSE)\n}\n",
    "created" : 1406741213034.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3772978986",
    "id" : "9DB05142",
    "lastKnownWriteTime" : 1406762970,
    "path" : "~/Dropbox/R/Packages/rodact/R/labelZones.R",
    "project_path" : "R/labelZones.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}